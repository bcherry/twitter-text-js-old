<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Test twitter-text-js</title>
	<meta name="author" content="eric">
  <link rel="stylesheet" href="http://github.com/jquery/qunit/raw/master/qunit/qunit.css" type="text/css" media="screen" />
  <script type="text/javascript" src="http://github.com/jquery/qunit/raw/master/qunit/qunit.js"></script>
  <script type="text/javascript" src="../lib/twitter-text.js"></script>
  <script type="text/javascript" src="conformance/autolink.js"></script>
	
	<script type="text/javascript" charset="utf-8">
	// <![CDATA[

	

	


	module("TwitterText AutoLink");
	function auto_link(text) {
	  return TwitterText.auto_link(text, { 'suppress_no_follow': true });
	}
	var autolink_tests = {"tests":{"all":[{"expected":"\u003Ca href=\"http://www.flickr.com/photos/29674651@N00/4382024406\"\u003Ehttp://www.flickr.com/photos/29674651@N00/4382024406\u003C/a\u003E if you know what's good for you.","text":"http://www.flickr.com/photos/29674651@N00/4382024406 if you know what's good for you.","description":"Autolink all does not break on URL with @"},{"expected":"Check out: \u003Ca href=\"http://example.com/test\"\u003Ehttp://example.com/test\u003C/a\u003E\u0026@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/chasesechrist\"\u003Echasesechrist\u003C/a\u003E","text":"Check out: http://example.com/test\u0026@chasesechrist","description":"Autolink all does not allow \u0026 without ?"}],"urls":[{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E","text":"text http://example.com","description":"Autolink trailing url"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E more text","text":"text http://example.com more text","description":"Autolink url in mid-text"},{"expected":"\u3044\u307e\u306a\u306b\u3057\u3066\u308b\u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E\u3044\u307e\u306a\u306b\u3057\u3066\u308b","text":"\u3044\u307e\u306a\u306b\u3057\u3066\u308bhttp://example.com\u3044\u307e\u306a\u306b\u3057\u3066\u308b","description":"Autolink url in Japanese text"},{"expected":"text (\u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E)","text":"text (http://example.com)","description":"Autolink url surrounded by parentheses"},{"expected":"I enjoy Macintosh Brand computers: \u003Ca href=\"http://\u272adf.ws/ejp\"\u003Ehttp://\u272adf.ws/ejp\u003C/a\u003E","text":"I enjoy Macintosh Brand computers: http://\u272adf.ws/ejp","description":"Autolink url containing unicode characters"},{"expected":"test \u003Ca href=\"http://www.example.co.jp\"\u003Ehttp://www.example.co.jp\u003C/a\u003E","text":"test http://www.example.co.jp","description":"Autolink url with .co. under TLD"},{"expected":"badly formatted http://foo!bar.com","text":"badly formatted http://foo!bar.com","description":"DO NOT Autolink url containing ! character in the domain"},{"expected":"badly formatted http://foo_bar.com","text":"badly formatted http://foo_bar.com","description":"DO NOT Autolink url containing _ character in the domain"},{"expected":"text:\u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E","text":"text:http://example.com","description":"Autolink url preceded by :"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E?","text":"text http://example.com?","description":"Autolink url followed by ? (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E!","text":"text http://example.com!","description":"Autolink url followed by ! (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E,","text":"text http://example.com,","description":"Autolink url followed by , (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E.","text":"text http://example.com.","description":"Autolink url followed by . (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E:","text":"text http://example.com:","description":"Autolink url followed by : (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E;","text":"text http://example.com;","description":"Autolink url followed by ; (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E]","text":"text http://example.com]","description":"Autolink url followed by ] (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E)","text":"text http://example.com)","description":"Autolink url followed by ) (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E}","text":"text http://example.com}","description":"Autolink url followed by } (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E=","text":"text http://example.com=","description":"Autolink url followed by = (without it)"},{"expected":"text \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E'","text":"text http://example.com'","description":"Autolink url followed by ' (without it)"},{"expected":"text /http://example.com","text":"text /http://example.com","description":"DO NOT Autolink url preceded by /"},{"expected":"text !http://example.com","text":"text !http://example.com","description":"DO NOT Autolink url preceded by !"},{"expected":"text =http://example.com","text":"text =http://example.com","description":"DO NOT Autolink url preceded by ="},{"expected":"\u003Clink rel='true'\u003E\u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E\u003C/link\u003E","text":"\u003Clink rel='true'\u003Ehttp://example.com\u003C/link\u003E","description":"Autolink url embedded in link tag"},{"expected":"\u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E \u003Ca href=\"https://sslexample.com\"\u003Ehttps://sslexample.com\u003C/a\u003E \u003Ca href=\"http://sub.example.com\"\u003Ehttp://sub.example.com\u003C/a\u003E","text":"http://example.com https://sslexample.com http://sub.example.com","description":"Autolink multiple urls"},{"expected":"\u003Ca href=\"http://example.mobi/path\"\u003Ehttp://example.mobi/path\u003C/a\u003E","text":"http://example.mobi/path","description":"Autolink url with long TLD"},{"expected":"\u003Ca href=\"http://www.example.com\"\u003Ewww.example.com\u003C/a\u003E","text":"www.example.com","description":"Autolink url without protocol (with www)"},{"expected":"\u003Ca href=\"http://WWW.EXAMPLE.COM\"\u003EWWW.EXAMPLE.COM\u003C/a\u003E","text":"WWW.EXAMPLE.COM","description":"Autolink url without protocol (with WWW)"},{"expected":"\u003Ca href=\"http://foo.com\"\u003Ehttp://foo.com\u003C/a\u003E AND \u003Ca href=\"https://bar.com\"\u003Ehttps://bar.com\u003C/a\u003E AND \u003Ca href=\"http://www.foobar.com\"\u003Ewww.foobar.com\u003C/a\u003E","text":"http://foo.com AND https://bar.com AND www.foobar.com","description":"Multiple URLs with different protocols"},{"expected":"See \u003Ca href=\"http://example.com\"\u003Ehttp://example.com\u003C/a\u003E example.com","text":"See http://example.com example.com","description":"Autolink raw domain followed by domain"},{"expected":"\u003Ca href=\"http://www.flickr.com/photos/29674651@N00/4382024406\"\u003Ehttp://www.flickr.com/photos/29674651@N00/4382024406\u003C/a\u003E","text":"http://www.flickr.com/photos/29674651@N00/4382024406","description":"Autolink url that includes @-sign and numeric dir under it"},{"expected":"\u003Ca href=\"http://www.flickr.com/photos/29674651@N00/foobar\"\u003Ehttp://www.flickr.com/photos/29674651@N00/foobar\u003C/a\u003E","text":"http://www.flickr.com/photos/29674651@N00/foobar","description":"Autolink url that includes @-sign and non-numeric dir under it"},{"expected":"I think it's proper to end sentences with a period \u003Ca href=\"http://tell.me\"\u003Ehttp://tell.me\u003C/a\u003E. Even when they contain a URL.","text":"I think it's proper to end sentences with a period http://tell.me. Even when they contain a URL.","description":"Autolink URL with only a domain followed by a period doesn't swallow the period."},{"expected":"I think it's proper to end sentences with a period \u003Ca href=\"http://tell.me/why\"\u003Ehttp://tell.me/why\u003C/a\u003E. Even when they contain a URL.","text":"I think it's proper to end sentences with a period http://tell.me/why. Even when they contain a URL.","description":"Autolink URL with a path followed by a period doesn't swallow the period."},{"expected":"I think it's proper to end sentences with a period \u003Ca href=\"http://tell.me/why?=because.i.want.it\"\u003Ehttp://tell.me/why?=because.i.want.it\u003C/a\u003E. Even when they contain a URL.","text":"I think it's proper to end sentences with a period http://tell.me/why?=because.i.want.it. Even when they contain a URL.","description":"Autolink URL with a query followed by a period doesn't swallow the period."},{"expected":"Czech out sweet deals at \u003Ca href=\"http://mrs.domain-dash.biz\"\u003Ehttp://mrs.domain-dash.biz\u003C/a\u003E ok?","text":"Czech out sweet deals at http://mrs.domain-dash.biz ok?","description":"Autolink URL with a hyphen in the domain name"},{"expected":"Is www...foo a valid URL?","text":"Is www...foo a valid URL?","description":"Autolink URL should NOT autolink www...foo"},{"expected":"Is www.-foo.com a valid URL?","text":"Is www.-foo.com a valid URL?","description":"Autolink URL should NOT autolink www.-foo.com"},{"expected":"Is \u003Ca href=\"http://www.foo-bar.com\"\u003Ewww.foo-bar.com\u003C/a\u003E a valid URL?","text":"Is www.foo-bar.com a valid URL?","description":"Autolink URL should autolink a domain with a valid dash"},{"expected":"Check out \u003Ca href=\"http://search.twitter.com/search?q=avro\u0026lang=en\"\u003Ehttp://search.twitter.com/search?q=avro\u0026lang=en\u003C/a\u003E","text":"Check out http://search.twitter.com/search?q=avro\u0026lang=en","description":"Autolink URL should link search urls (with \u0026lang=, not \u0026lang;)"}],"lists":[{"expected":"text @\u003Ca class=\"tweet-url list-slug\" href=\"http://twitter.com/username/list\"\u003Eusername/list\u003C/a\u003E","text":"text @username/list","description":"Autolink list preceded by a space"},{"expected":"text @\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E/ list","text":"text @username/ list","description":"DO NOT Autolink list when space follows slash"},{"expected":"text @/list","text":"text @/list","description":"DO NOT Autolink list with empty username"},{"expected":"@\u003Ca class=\"tweet-url list-slug\" href=\"http://twitter.com/username/list\"\u003Eusername/list\u003C/a\u003E","text":"@username/list","description":"Autolink list at the beginning"},{"expected":"meet@the/beach","text":"meet@the/beach","description":"DO NOT Autolink list preceded by letter"},{"expected":"great.@\u003Ca class=\"tweet-url list-slug\" href=\"http://twitter.com/username/list\"\u003Eusername/list\u003C/a\u003E","text":"great.@username/list","description":"Autolink list preceded by puctuation"},{"expected":"@\u003Ca class=\"tweet-url list-slug\" href=\"http://twitter.com/username/list\"\u003Eusername/list\u003C/a\u003E\u0026^$%^","text":"@username/list\u0026^$%^","description":"Autolink list followed by puctuation"},{"expected":"@\u003Ca class=\"tweet-url list-slug\" href=\"http://twitter.com/username/list5678901234567890123456789012345678901234567890123456789012345678901234567890\"\u003Eusername/list5678901234567890123456789012345678901234567890123456789012345678901234567890\u003C/a\u003EA","text":"@username/list5678901234567890123456789012345678901234567890123456789012345678901234567890A","description":"Autolink list name over 80 characters (truncated to 80)"}],"hashtags":[{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E","text":"text #hashtag","description":"Autolink trailing hashtag"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hash0tag\" title=\"#hash0tag\" class=\"tweet-url hashtag\"\u003E#hash0tag\u003C/a\u003E","text":"text #hash0tag","description":"Autolink alphanumeric hashtag (letter-number-letter)"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%231tag\" title=\"#1tag\" class=\"tweet-url hashtag\"\u003E#1tag\u003C/a\u003E","text":"text #1tag","description":"Autolink alphanumeric hashtag (number-letter)"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hash_tag\" title=\"#hash_tag\" class=\"tweet-url hashtag\"\u003E#hash_tag\u003C/a\u003E","text":"text #hash_tag","description":"Autolink hashtag with underscore"},{"expected":"text #1234","text":"text #1234","description":"DO NOT Autolink all-numeric hashtags"},{"expected":"text#hashtag","text":"text#hashtag","description":"DO NOT Autolink hashtag preceded by a letter"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hashtag1\" title=\"#hashtag1\" class=\"tweet-url hashtag\"\u003E#hashtag1\u003C/a\u003E \u003Ca href=\"http://twitter.com/search?q=%23hashtag2\" title=\"#hashtag2\" class=\"tweet-url hashtag\"\u003E#hashtag2\u003C/a\u003E","text":"text #hashtag1 #hashtag2","description":"Autolink multiple hashtags"},{"expected":"text.\u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E","text":"text.#hashtag","description":"Autolink hashtag preceded by a period"},{"expected":"\u0026#nbsp;","text":"\u0026#nbsp;","description":"DO NOT Autolink hashtag preceded by \u0026"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E!","text":"text #hashtag!","description":"Autolink hashtag followed by ! (! not included)"},{"expected":"text \u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E\u306e","text":"text #hashtag\u306e","description":"Autolink hashtag followed by Japanese"},{"expected":"text\u3000\u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E","text":"text\u3000#hashtag","description":"Autolink hashtag preceded by full-width space (U+3000)"},{"expected":"\u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E#hashtag\u003C/a\u003E\u3000text","text":"#hashtag\u3000text","description":"Autolink hashtag followed by full-width space (U+3000)"},{"expected":"\u003Ca href=\"http://twitter.com/search?q=%23hashtag\" title=\"#hashtag\" class=\"tweet-url hashtag\"\u003E\uff03hashtag\u003C/a\u003E","text":"\uff03hashtag","description":"Autolink hashtag with full-width hash (U+FF03)"}],"usernames":[{"expected":"text @\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E","text":"text @username","description":"Autolink trailing username"},{"expected":"@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E text","text":"@username text","description":"Autolink username at the beginning"},{"expected":"meet@the beach","text":"meet@the beach","description":"DO NOT Autolink username preceded by a letter"},{"expected":"great.@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E","text":"great.@username","description":"Autolink username preceded by puctuation"},{"expected":"@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E\u0026^$%^","text":"@username\u0026^$%^","description":"Autolink username followed by puctuation"},{"expected":"@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E\u306e","text":"@username\u306e","description":"Autolink username followed by Japanese"},{"expected":"\u3042@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E","text":"\u3042@username","description":"Autolink username preceded by Japanese"},{"expected":"\u3042@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E\u306e","text":"\u3042@username\u306e","description":"Autolink username surrounded by Japanese"},{"expected":"\uff20\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E","text":"\uff20username","description":"Autolink username with full-width at sign (U+FF20)"},{"expected":"@\u003Ca class=\"tweet-url username\" href=\"http://twitter.com/username901234567890\"\u003Eusername901234567890\u003C/a\u003E1","text":"@username9012345678901","description":"DO NOT Autolink username over 20 characters"}]}};
	for (var testName in autolink_tests.tests) {
		(function (testName) {
			test("testing autolink " + testName, function () {
				var list = autolink_tests.tests[testName];
				for (var i = 0; i < list.length; i += 1) {
					var obj = list[i];
					equals(auto_link(obj.text), obj.expected, obj.description);
				}
			});
		}(testName));
	}
	
	module("TwitterText Extract");
	var extractFuncs = {
		mentions: function (text) {
			return TwitterText.extract_mentioned_screen_names(text);
		},
		replies: function (text) {
			return TwitterText.extract_reply_screen_name(text);
		},
		urls: function (text) {
			return TwitterText.extract_urls(text);
		},
		hashtags: function (text) {
			return TwitterText.extract_hashtags(text);
		}
	};
	var extract_tests = {"tests":{"mentions":[{"expected":["username"],"text":"@username reply","description":"Extract mention at the begining of a tweet"},{"expected":["username"],"text":"mention @username","description":"Extract mention at the end of a tweet"},{"expected":["username"],"text":"mention @username in the middle","description":"Extract mention in the middle of a tweet"},{"expected":["user_name"],"text":"mention @user_name","description":"Extract mention of username with underscore"},{"expected":["12345"],"text":"mention @12345","description":"Extract mention of all numeric username"},{"expected":["username1","username2"],"text":"mention @username1 @username2","description":"Extract mention or multiple usernames"},{"expected":["username"],"text":"\u306e@username\u306b\u5230\u7740\u3092\u5f85\u3063\u3066\u3044\u308b","description":"Extract mention in the middle of a Japanese tweet"},{"expected":["username"],"text":"Current Status: @_@ (cc: @username)","description":"DO NOT extract username ending in @"},{"expected":["username"],"text":"@username email me @test@example.com","description":"Extract lone metion but not @user@user (too close to an email)"}],"urls":[{"expected":["http://example.com"],"text":"http://example.com","description":"Extract a lone URL"},{"expected":["http://google.com"],"text":"text http://google.com","description":"Extract valid URL: http://google.com"},{"expected":["http://foobar.com/#"],"text":"text http://foobar.com/#","description":"Extract valid URL: http://foobar.com/#"},{"expected":["http://google.com/#foo"],"text":"text http://google.com/#foo","description":"Extract valid URL: http://google.com/#foo"},{"expected":["http://google.com/#search?q=iphone%20-filter%3Alinks"],"text":"text http://google.com/#search?q=iphone%20-filter%3Alinks","description":"Extract valid URL: http://google.com/#search?q=iphone%20-filter%3Alinks"},{"expected":["http://twitter.com/#search?q=iphone%20-filter%3Alinks"],"text":"text http://twitter.com/#search?q=iphone%20-filter%3Alinks","description":"Extract valid URL: http://twitter.com/#search?q=iphone%20-filter%3Alinks"},{"expected":["http://www.boingboing.net/2007/02/14/katamari_damacy_phon.html"],"text":"text http://www.boingboing.net/2007/02/14/katamari_damacy_phon.html","description":"Extract valid URL: http://www.boingboing.net/2007/02/14/katamari_damacy_phon.html"},{"expected":["http://somehost.com:3000"],"text":"text http://somehost.com:3000","description":"Extract valid URL: http://somehost.com:3000"},{"expected":["http://xo.com/~matthew+%-x"],"text":"text http://xo.com/~matthew+%-x","description":"Extract valid URL: http://xo.com/~matthew+%-x"},{"expected":["http://xo.com/~matthew+%-,.;x"],"text":"text http://xo.com/~matthew+%-,.;x","description":"Extract valid URL: http://xo.com/~matthew+%-,.;x"},{"expected":["http://xo.com/,.;x"],"text":"text http://xo.com/,.;x","description":"Extract valid URL: http://xo.com/,.;x"},{"expected":["http://en.wikipedia.org/wiki/Primer_(film)"],"text":"text http://en.wikipedia.org/wiki/Primer_(film)","description":"Extract valid URL: http://en.wikipedia.org/wiki/Primer_(film)"},{"expected":["http://www.ams.org/bookstore-getitem/item=mbk-59"],"text":"text http://www.ams.org/bookstore-getitem/item=mbk-59","description":"Extract valid URL: http://www.ams.org/bookstore-getitem/item=mbk-59"},{"expected":["http://\u272adf.ws/ejp"],"text":"text http://\u272adf.ws/ejp","description":"Extract valid URL: http://\u272adf.ws/ejp"},{"expected":["http://chilp.it/?77e8fd"],"text":"text http://chilp.it/?77e8fd","description":"Extract valid URL: http://chilp.it/?77e8fd"},{"expected":["http://x.com/oneletterdomain"],"text":"text http://x.com/oneletterdomain","description":"Extract valid URL: http://x.com/oneletterdomain"},{"expected":[],"text":"text http://doman-dash_2314352345_dfasd.foo-cow_4352.com","description":"DO NOT extract invalid URL: http://-begin_dash_2314352345_dfasd.foo-cow_4352.com"},{"expected":[],"text":"text http://no-tld","description":"DO NOT extract invalid URL: http://no-tld"},{"expected":[],"text":"text http://tld-too-short.x","description":"DO NOT extract invalid URL: http://tld-too-short.x"},{"expected":["http://word-and-a-number-8-ftw.domain.tld/"],"text":"text http://word-and-a-number-8-ftw.domain.tld/","description":"Extract a very long hyphenated sub-domain URL (single letter hyphens)"},{"expected":["http://domain.tld"],"text":"text http://domain.tld-that-you-should-have-put-a-space-after","description":"Extract a hyphenated TLD (usually a typo)"}],"hashtags":[{"expected":["hashtag"],"text":"a #hashtag here","description":"Extract an all-alpha hashtag"},{"expected":["hashtag1"],"text":"this is #hashtag1","description":"Extract a letter-then-number hashtag"},{"expected":["1hashtag"],"text":"#1hashtag is this","description":"Extract a number-then-letter hashtag"},{"expected":[],"text":"On the #16 bus","description":"DO NOT Extract an all-numeric hashtag"},{"expected":["ma\u00f1ana"],"text":"I'll write more tests #ma\u00f1ana","description":"Extract a hashtag containing \u00f1"},{"expected":["caf\u00e9"],"text":"Working remotely #caf\u00e9","description":"Extract a hashtag containing \u00e9"},{"expected":["m\u00fcnchen"],"text":"Getting my Oktoberfest on #m\u00fcnchen","description":"Extract a hashtag containing \u00fc"},{"expected":[],"text":"this is not valid: # \u4f1a\u8b70\u4e2d \u30cf\u30c3\u30b7\u30e5","description":"DO NOT Extract a hashtag containing Japanese"}],"replies":[{"expected":"username","text":"@username reply","description":"Extract reply at the begining of a tweet"},{"expected":"username","text":" @username reply","description":"Extract reply preceded by only a space"},{"expected":"username","text":"\u3000@username reply","description":"Extract reply preceded by only a full-width space (U+3000)"},{"expected":null,"text":"a @username mention, not a reply","description":"DO NOT Extract reply when preceded by text"},{"expected":null,"text":".@username mention, not a reply","description":"DO NOT Extract reply when preceded by ."},{"expected":null,"text":"/@username mention, not a reply","description":"DO NOT Extract reply when preceded by /"},{"expected":null,"text":"_@username mention, not a reply","description":"DO NOT Extract reply when preceded by _"},{"expected":null,"text":"-@username mention, not a reply","description":"DO NOT Extract reply when preceded by -"},{"expected":null,"text":"+@username mention, not a reply","description":"DO NOT Extract reply when preceded by +"},{"expected":null,"text":"#@username mention, not a reply","description":"DO NOT Extract reply when preceded by #"},{"expected":null,"text":"!@username mention, not a reply","description":"DO NOT Extract reply when preceded by !"},{"expected":null,"text":"@@username mention, not a reply","description":"DO NOT Extract reply when preceded by @"}]}};
	for (var testName in extract_tests.tests) {
		(function (testName) {
			test("testing extract " + testName, function () {
				var list = extract_tests.tests[testName];
				for (var i = 0; i < list.length; i += 1) {
					var obj = list[i];
					same(extractFuncs[testName](obj.text), obj.expected, obj.description);
				}
			});
		}(testName));
	}
	
	module("TwitterText Hit Highlighting")
	function hit_highlight(text, hits) {
		return TwitterText.hit_highlight(text, hits);
	}
	var hit_highlighting_tests = {"tests":{"with_links":[{"hits":[[10,14]],"expected":"@\u003Ca href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E \u003Cem\u003Ethis\u003C/em\u003E is an example","text":"@\u003Ca href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E this is an example","description":"Highlight after a link (offset does not include markup)"},{"hits":[[1,9]],"expected":"@\u003Ca href=\"http://twitter.com/username\"\u003E\u003Cem\u003Eusername\u003C/em\u003E\u003C/a\u003E this is an example","text":"@\u003Ca href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E this is an example","description":"Highlight anchor text of a link (offset does not include markup)"},{"hits":[[0,14]],"expected":"\u003Cem\u003E@\u003Ca href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E this\u003C/em\u003E is an example","text":"@\u003Ca href=\"http://twitter.com/username\"\u003Eusername\u003C/a\u003E this is an example","description":"Highlight around a link (offset does not include markup)"}],"plain_text":[{"hits":[[0,4]],"expected":"\u003Cem\u003Ethis\u003C/em\u003E is a test","text":"this is a test","description":"Highlight the beginning of a string"},{"hits":[[5,7]],"expected":"this \u003Cem\u003Eis\u003C/em\u003E a test","text":"this is a test","description":"Highlight the middle of a string"},{"hits":[[10,14]],"expected":"this is a \u003Cem\u003Etest\u003C/em\u003E","text":"this is a test","description":"Highlight the end of a string"},{"hits":[[0,4],[10,14]],"expected":"\u003Cem\u003Ethis\u003C/em\u003E is a \u003Cem\u003Etest\u003C/em\u003E","text":"this is a test","description":"Highlight multiple terms"},{"hits":[],"expected":"this is a test","text":"this is a test","description":"DO NOT highlight with empty hits"},{"hits":[[0,2]],"expected":"\u003Cem\u003E\u6771\u4eac\u003C/em\u003E\u306e\u5929\u6c17","text":"\u6771\u4eac\u306e\u5929\u6c17","description":"Highlight within Japanese text"}]}};
	for (var testName in hit_highlighting_tests.tests) {
		(function (testName) {
			test("testing hit highlighting " + testName, function () {
				var list = hit_highlighting_tests.tests[testName];
				for (var i = 0; i < list.length; i += 1) {
					var obj = list[i];
					same(hit_highlight(obj.text, obj.hits), obj.expected, obj.description);
				}
			});
		}(testName));
	}
	// ]]>
	</script>
	<!-- Date: 2010-04-23 -->
</head>
<body>
<h1 id="qunit-header">QUnit example</h1>
<h2 id="qunit-banner"></h2>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
</body>
</html>
